{"version":3,"file":"data-table.js","sources":["../../src/js/data-table.js"],"sourcesContent":["/**\n * Private Variables\n */\nconst dataPrefix = `data-${vl.ns}`,\n  dtAtt = `${dataPrefix}table`,\n  dtDressedAtt = `${dataPrefix}table-dressed`,\n  dataCheckedChkboxes = `[${dtAtt}-checkbox]:checked`,\n  dataTableChk = `[${dtAtt}-checkbox]`,\n  dataActions = `[${dtAtt}-action]`,\n  dtSelectableAtt = `${dtAtt}-selectable`,\n  dtCheckAllAtt = `${dtAtt}-check-all`,\n  dtDisableAtt = `data-${vl.ns}disable`;\n\nclass DataTable {\n  /**\n   * dress one element\n   * @param table\n   */\n  dress(table) {\n    table.setAttribute(dtDressedAtt, true);\n\n    const actions = table.querySelectorAll(dataActions),\n      chkboxes = table.querySelectorAll(dataTableChk),\n      mainChkbox = table.querySelector(`[${dtCheckAllAtt}]`),\n      dataRowSelectable = table.querySelectorAll(`[${dtSelectableAtt}]`),\n      dataRowSelectableAnchors = table.querySelectorAll(\n        ` [${dtSelectableAtt}] a,\n          [${dtSelectableAtt}] button,\n          [${dtSelectableAtt}] input,\n          [${dtSelectableAtt}] label `\n      );\n\n    // Detect click on thead checkbox (check all rows)\n    if (vl.util.exists(mainChkbox)) {\n      mainChkbox.addEventListener('change', () => {\n        if (!vl.util.exists(chkboxes)) {\n          return;\n        }\n\n        vl.util.each(chkboxes, chk => {\n          chk.checked = mainChkbox.checked;\n        });\n      });\n    }\n\n    // Detect click on tbody checkbox (check one row)\n    if (vl.util.exists(chkboxes)) {\n      vl.util.each(chkboxes, chk => {\n        chk.addEventListener('change', e => {\n          toggleActions();\n\n          if (vl.util.exists(mainChkbox) && !e.target.checked) {\n            mainChkbox.checked = false;\n          }\n        });\n      });\n    }\n\n    // Detect click on data-table-selectable attribute\n    vl.util.each(dataRowSelectable, row => {\n      row.addEventListener('click', () => {\n        let chk = row.querySelector(dataTableChk);\n\n        if (!vl.util.exists(chk)) {\n          return;\n        }\n\n        chk.checked = !chk.checked;\n\n        toggleActions();\n      });\n    });\n\n    // Stop propagation after click on anchor, button, labem or input\n    vl.util.each(dataRowSelectableAnchors, anchor => {\n      anchor.addEventListener('click', e => {\n        e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;\n      });\n    });\n\n    // toggle actions\n    function toggleActions() {\n      if (!vl.util.exists(actions)) {\n        return;\n      }\n\n      let checkedChkboxes = table.querySelectorAll(dataCheckedChkboxes);\n\n      vl.util.each(actions, action => {\n        action.setAttribute(\n          dtDisableAtt,\n          checkedChkboxes.length ? 'false' : 'true'\n        );\n        action.setAttribute(\n          'aria-hidden',\n          checkedChkboxes.length ? 'false' : 'true'\n        );\n      });\n    }\n  }\n\n  /**\n   * dressAll function for the datatable functionality\n   * @return {false}\n   */\n  dressAll() {\n    const tables = document.querySelectorAll(\n      `[${dtAtt}]:not([${dtDressedAtt}]):not([data-${vl.ns}js-dress=\"false\"])`\n    );\n\n    vl.util.each(tables, table => this.dress(table));\n  }\n}\n\nif(!('dataTable' in vl)) {\n  vl.dataTable = new DataTable();\n  vl.dataTable.dressAll();\n}\n\nexport default DataTable;\n"],"names":["dataPrefix","vl","ns","dtAtt","dtDressedAtt","dataCheckedChkboxes","dataTableChk","dataActions","dtSelectableAtt","dtCheckAllAtt","dtDisableAtt","DataTable","table","setAttribute","actions","querySelectorAll","chkboxes","mainChkbox","querySelector","dataRowSelectable","dataRowSelectableAnchors","util","exists","addEventListener","each","chk","checked","e","toggleActions","target","row","anchor","stopPropagation","cancelBubble","checkedChkboxes","action","length","tables","document","dress","dataTable","dressAll"],"mappings":"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"}